<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Shirly,zdddrszj@163.com"><title>DOM 中的范围 · Shirly</title><meta name="description" content="DOM 中的范围
1、用 DOM 范围实现简单选择
2、用 DOM 范围实现复杂选择
3、操作 DOM 范围中的内容
4、插入 DOM 范围中的内容
5、折叠 DOM 范围
6、比较 DOM 范围
7"><meta name="keywords" content="Web,HTML,CSS,android,Linux"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/h-blog/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><link rel="stylesheet" href="/h-blog/css/style.css"><link rel="stylesheet" href="/h-blog/css/blog_basic.css"><link rel="stylesheet" href="/h-blog/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/h-blog/images/logo@2x.png" style="width:127px;"><h3 style="text-transform:none;"><a href="/">Shirly</a></h3><div class="description"><p>Without a friend the world is a wilderness.</p></div></div></div><ul class="social-links"><li><a href="/h-blog/atom.xml"><i class="fa fa-rss"></i></a></li><li><a href="http://weibo.com/zdddrszj/home"><i class="fa fa-weibo"></i></a></li><li><a href="http://github.com/zdddrszj"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/h-blog">首页</a></li><li><a href="/h-blog/archives">归档</a></li><li><a href="/h-blog/tagsCloud">标签云</a></li><li><a href="/h-blog/about">关于</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img src="/h-blog/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h2><a>DOM 中的范围</a></h2><div class="post-intro"><span class="wordcount"><i class="fa fa-calendar-o"></i><span class="post-count">2017-05-24</span></span><span class="post-meta-divider">|</span><span class="wordcount"><i class="fa fa-folder-o"></i><span class="post-count"><a href="/h-blog/categories/前端/" title class="tag">前端</a></span></span><span class="post-meta-divider">|</span><span class="wordcount"><i class="fa fa-edit"></i><span class="post-count">字数统计4,110</span></span><span class="post-meta-divider">|</span><span class="wordcount"><i class="fa fa-clock-o"></i><span class="post-count">阅读时长17分钟</span></span></div></div><div class="post-content"><!-- toc -->
<ul>
<li><a href="#dom-中的范围">DOM 中的范围</a><ul>
<li><a href="#1-用-dom-范围实现简单选择">1、用 DOM 范围实现简单选择</a></li>
<li><a href="#2-用-dom-范围实现复杂选择">2、用 DOM 范围实现复杂选择</a></li>
<li><a href="#3-操作-dom-范围中的内容">3、操作 DOM 范围中的内容</a></li>
<li><a href="#4-插入-dom-范围中的内容">4、插入 DOM 范围中的内容</a></li>
<li><a href="#5-折叠-dom-范围">5、折叠 DOM 范围</a></li>
<li><a href="#6-比较-dom-范围">6、比较 DOM 范围</a></li>
<li><a href="#7-复制-dom-范围">7、复制 DOM 范围</a></li>
<li><a href="#8-清理-dom-范围">8、清理 DOM 范围</a></li>
</ul>
</li>
<li><a href="#ie8及更早版本中的范围">IE8及更早版本中的范围</a><ul>
<li><a href="#1-用-ie-范围实现简单的选择">1、用 IE 范围实现简单的选择</a></li>
<li><a href="#2-使用-ie-范围实现复杂的选择">2、使用 IE 范围实现复杂的选择</a></li>
<li><a href="#3-操作-ie-范围中的内容">3、操作 IE 范围中的内容</a></li>
<li><a href="#4-折叠-ie-范围">4、折叠 IE 范围</a></li>
<li><a href="#5-比较-ie-范围">5、比较 IE 范围</a></li>
<li><a href="#6-复制-ie-范围">6、复制 IE 范围</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<p>为了让开发人员更方便控制页面，<code>DOM2</code> 级遍历和范围模块定义了 <strong>范围 （range）</strong> 接口。通过范围可以选择文档中的一个区域，而不必考虑节点的界限（选择在后台完成，对用户是不可见的）。 <code>Firefox</code>、<code>Opera</code>、<code>Safari</code> 和 <code>Chrome</code> 都支持 <code>DOM</code> 范围。IE 以专有方式实现了自己的范围特性。</p>
<h1><span id="dom-中的范围">DOM 中的范围</span></h1><p><code>DOM2</code> 级在 <code>Document</code> 类型中定义了 <code>createRange()</code> 方法。在兼容 <code>DOM</code> 的浏览器中，使用这个方法属于 <code>document</code> 对象。使用 <code>hasFeature()</code> 或者直接检测该方法，都可以确定浏览器是否支持范围。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> supportsRange = <span class="built_in">document</span>.implementation.hasFeature(<span class="string">"Range"</span>,<span class="string">"2.0"</span>);</span><br><span class="line"><span class="keyword">var</span> alsoSupportsRange = (<span class="keyword">typeof</span> <span class="built_in">document</span>.createRange == <span class="string">"function"</span>);</span><br></pre></td></tr></table></figure>
<p>如果浏览器支持范围，那么就可以使用 <code>createRange()</code> 来创建 <code>DOM</code> 范围，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.createRange();</span><br></pre></td></tr></table></figure>
<p>与节点类似，新创建的范围与创建它的文档关联在一起，不能用于其他文档。<br>每个范围由一个<code>Range</code> 类型的实例表示，这个实例拥有很多属性和方法。下列属性提供了当前范围在文档中的位置信息：</p>
<p>1、<code>startContainer</code>：包含范围起点的节点（即选区中第一个节点的父节点）。<br>2、<code>startOffset</code>：范围在 startContainer 中起点的偏移量。<br>3、<code>endContainer</code>：包含范围终点的节点（即选区中最后一个节点的父节点）。<br>4、<code>endOffset</code>：范围在 endContainer 中终点的偏移量。<br>5、<code>commonAncestorContainer</code>：startContainer 和 endContainer 共同的祖先节点。</p>
<p>下面简单介绍一下范围的使用方法：</p>
<h3><span id="1-用-dom-范围实现简单选择">1、用 DOM 范围实现简单选择</span></h3><p>要使用范围来选择文档中的一部分，最简单的方式是使用 <code>selectNode()</code> 或 <code>selectNodeContents()</code>，例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> range1 = <span class="built_in">document</span>.createRange(),</span></span><br><span class="line"><span class="javascript">                range2 = <span class="built_in">document</span>.createRange(),</span></span><br><span class="line"><span class="javascript">                p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span></span><br><span class="line"><span class="undefined">            range1.selectNode(p1);</span></span><br><span class="line"><span class="undefined">            range2.selectNodeContents(p1);      </span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>两个范围包含文档中不同部分，如图：<br><img src="https://cloud.githubusercontent.com/assets/9649921/11467545/c48f7f2a-9783-11e5-8f56-0b63c1ade9b1.png" alt="1"><br>在调用 <code>selectNode()</code> 时，<code>startContainer</code>、<code>endContainer</code> 都等于传入节点的父节点，也就是 <code>document.body</code>。而 <code>startOffset</code> 属性等于给定节点在其父节点的 <code>childNodes</code> 集合中的索引（在这个例子中是 <code>1</code> ，因为兼容 <code>DOM</code> 的浏览器将空格算作一个文本节点），<code>endOffset</code> 等于 <code>startOffset</code> 加 <code>1</code> （因为只选择了一个节点）。<br>在调用 <code>selectNodeContents()</code> 时，<code>startContainer</code>、<code>endContainer</code> 等于传入的节点，即这个例子中的 <code>&lt;p&gt;</code> 元素。而 <code>startOffset</code> 属性始终等于 <code>0</code> ，因为范围从给定节点的第一个子节点开始。最后，<code>endOffset</code> 等于子节点的数量（node.childNodes.length），在这个例子中是 <code>2</code> 。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(range1.startContainer); <span class="comment">//&lt;body&gt;...&lt;/body&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(range2.startContainer); <span class="comment">//&lt;p id="p1"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(range1.endContainer); <span class="comment">//&lt;body&gt;...&lt;/body&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(range2.endContainer); <span class="comment">//&lt;p id="p1"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(range1.startOffset); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(range2.startOffset); <span class="comment">//0</span></span><br><span class="line"><span class="built_in">console</span>.log(range1.endOffset); <span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(range2.endOffset); <span class="comment">//2</span></span><br></pre></td></tr></table></figure>
<p>此外，为了更精细地控制哪些节点包含在范围内，还可以使用下列方法：</p>
<p>1、<code>setStartBefore(refNode)</code>：将范围的起点设置在 refNode 之前。<br>2、<code>setStartAfter(refNode)</code>：将范围的起点设置在refNode 之后。<br>3、<code>setEndBefore(refNode)</code>：将范围的终点设置在 refNode 之前。<br>4、<code>setEndAfter(refNode)</code>：将范围的终点设置在 refNode 之后。</p>
<h3><span id="2-用-dom-范围实现复杂选择">2、用 DOM 范围实现复杂选择</span></h3><p>要创建复杂的范围就得使用 <code>setStart()</code> 和 <code>setEnd()</code> 方法。这两个方法都接受两个参数：一个参照节点和一个偏移量值。对 <code>setStart()</code> 来说，参照节点会变成 <code>startContainer</code>，而偏移量值会变   <code>startOffset</code> 。对于 <code>setEnd()</code> 来说，参照节点会变成 <code>endContainer</code> ，而偏移量值会变成 <code>endOffset</code>。<br>可以使用这两个方法来模拟 <code>selectNode()</code> 和 <code>selectNodeContents()</code> 。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range1 = <span class="built_in">document</span>.createRange(),</span><br><span class="line">    range2 = <span class="built_in">document</span>.createRange(),</span><br><span class="line">    p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>),</span><br><span class="line">    p1Index = <span class="number">-1</span>,i,len;</span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span>, len = p1.parentNode.childNodes.length; i &lt; len; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(p1.parentNode.childNodes[i] == p1)&#123;</span><br><span class="line">        p1Index = i;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">range1.setStart(p1.parentNode,p1Index);</span><br><span class="line">range1.setEnd(p1.parentNode,p1Index+<span class="number">1</span>);</span><br><span class="line">range2.setStart(p1,<span class="number">0</span>);</span><br><span class="line">range2.setEnd(p1,p1.childNodes.length);</span><br></pre></td></tr></table></figure>
<p>假设你只想选择前面 <code>HTML</code> 示例代码中从 <code>hello</code> 的 <code>llo</code> 到 <code>world!</code> 的 <code>o</code> ，可以这样做：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>),</span><br><span class="line">    helloNode = p1.firstChild.firstChild,</span><br><span class="line">    worldNode = p1.lastChild;</span><br><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.createRange();</span><br><span class="line">range.setStart(helloNode,<span class="number">2</span>);</span><br><span class="line">range.setEnd(worldNode,<span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>由于 <code>helloNode</code> 和 <code>worldNode</code> 都是文本节点，因此它们分别变成了新建范围的 <code>startContainer</code> 和 <code>endContainer</code> 。此时 <code>startOffset</code> 和 <code>endOffset</code> 分别用以确定两个节点所包含的文本中的位置，而不是用以确定子节点的位置。如图：<br><img src="https://cloud.githubusercontent.com/assets/9649921/11468680/5ef0bfd6-978c-11e5-9c91-31f038224c73.png" alt="2"></p>
<h3><span id="3-操作-dom-范围中的内容">3、操作 DOM 范围中的内容</span></h3><p>对前面的例子而言，范围经过计算知道选取中缺少一个开始的 <code>&lt;b&gt;</code> 标签，因此就会在后台动态添加一个该标签，同时还会在前面加入一个表示结束的 <code>&lt;b&gt;</code> 标签。于是修改后的 <code>DOM</code> 就变成如下所示：<br><code>&lt;p&gt;&lt;b&gt;He&lt;/b&gt;&lt;b&gt;llo&lt;/b&gt; world!&lt;/p&gt;</code>。</p>
<p>像这样创建了范围之后，就可以使用各种方法对范围的内容进行操作了。<br>第一个方法：<code>deleteContents()</code>，从文档中删除范围所包含的内容。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">range.deleteContents();</span><br></pre></td></tr></table></figure>
<p>执行这句代码之后，页面会显示如下 <code>HTML</code> 代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>He<span class="tag">&lt;/<span class="name">b</span>&gt;</span>rld!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>第二个方法：<code>extractContents()</code> ，也会从文档中移除范围选区，但会返回文档片段。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fragment = range.extractContents();</span><br><span class="line">p1.parentNode.appendChild(fragment);</span><br></pre></td></tr></table></figure>
<p>执行这句代码之后，页面会显示如下 <code>HTML</code> 代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>He<span class="tag">&lt;/<span class="name">b</span>&gt;</span>rld!<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>llo<span class="tag">&lt;/<span class="name">b</span>&gt;</span> wo</span><br></pre></td></tr></table></figure>
<p>第三个方法：<code>cloneContents()</code> ，会创建范围对象的一个副本，然后插入到其他地方。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fragment = range.cloneContents();</span><br><span class="line">p1.parentNode.appendChild(fragment);</span><br></pre></td></tr></table></figure>
<p>执行这句代码之后，页面会显示如下 <code>HTML</code> 代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>llo<span class="tag">&lt;/<span class="name">b</span>&gt;</span> wo</span><br></pre></td></tr></table></figure>
<h3><span id="4-插入-dom-范围中的内容">4、插入 DOM 范围中的内容</span></h3><p>利用范围，可以删除或复制内容，也可以使用 <code>insertNode()</code> 方法像范围选区的开始处插入一个节点。假设我们在前面例子中的 <code>HTML</code> 前面插入以下 <code>HTML</code> 代码：<code>&lt;span style=&quot;color:red;&quot;&gt;Inserted text&lt;/span&gt;</code>  ，那么可以使用以下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> span = <span class="built_in">document</span>.createElement(<span class="string">"span"</span>);</span><br><span class="line">span.style.color = <span class="string">"red"</span>;</span><br><span class="line">span.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"Inserted text"</span>));</span><br><span class="line">range.insertNode(span);</span><br></pre></td></tr></table></figure>
<p>执行这句代码之后，页面会显示如下 <code>HTML</code> 代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>He<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color: red;"</span>&gt;</span>Inserted text<span class="tag">&lt;/<span class="name">span</span>&gt;</span>llo<span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意：<code>&lt;span&gt;</code> 正好被插入到了 <code>hello</code> 中的 <code>llo</code> 前面，而该位置就是范围选区的开始位置。还要注意的是，这里并没有添加或删除 <code>&lt;b&gt;</code> 元素，使用这种技术可以插入一些帮助提示信息，例如在打开新窗口的链接旁插入一幅图像。</p>
<p>除了像范围内部插入内容之外，还可以围绕范围插入内容，此时就要使用 <code>surroundContents()</code> 方法。该方法接受一个参数，即环绕范围内容的节点。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">range.selectNode(helloNode);</span><br><span class="line"><span class="keyword">var</span> span = <span class="built_in">document</span>.createElement(<span class="string">"span"</span>);</span><br><span class="line">span.style.backgroundColor = <span class="string">"yellow"</span>;  </span><br><span class="line">range.surroundContents(span);</span><br></pre></td></tr></table></figure>
<p>执行这句代码之后，会给范围选区加上一个黄色背景。得到的 <code>HTML</code> 代码如下所示：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"background-color: yellow;"</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意：为了插入 <code>&lt;span&gt;</code> ，范围必须包含整个 <code>DOM</code> 选区（不能仅仅包含选中的 <code>DOM</code> 节点）。</p>
<h3><span id="5-折叠-dom-范围">5、折叠 DOM 范围</span></h3><p>所谓 <strong>折叠范围</strong> ，就是指范围中未选择文档的任何部分。使用 <code>collapse()</code> 方法来折叠范围，该方法接受一个参数，一个布尔值，表示要折叠到范围的哪一端。参数 <code>true</code> 表示要折叠到范围的起点，参数 <code>false</code> 表示要折叠到范围的终点。要确定范围已经折叠完毕，可以检查 <code>collapsed</code> 属性，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">range.collapse(<span class="literal">true</span>); <span class="comment">//折叠到起点</span></span><br><span class="line">alert(range.collapsed); <span class="comment">//输出 true</span></span><br></pre></td></tr></table></figure>
<p>检测某个范围是否处于折叠状态，可以帮助我们确定范围中的两个节点是否紧密相邻。例如，对于下面的 <code>HTML</code> 代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>Paragraph 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p2"</span>&gt;</span>Paragraph 2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们假设不知其实际构成（比如动态生成的），那么可以像下面这样创建一个范围：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="built_in">document</span>.getElementById(<span class="string">'p1'</span>),</span><br><span class="line">    p2 = <span class="built_in">document</span>.getElementById(<span class="string">'p2'</span>),</span><br><span class="line">    range = <span class="built_in">document</span>.createRange();</span><br><span class="line">range.setStartAfter(p1);</span><br><span class="line">range.setEndBefore(p2);</span><br><span class="line">alert(range.collapsed); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>在这个例子中，创建的范围是折叠的，所以 <code>p1</code> 和 <code>p1</code> 是相邻的。</p>
<h3><span id="6-比较-dom-范围">6、比较 DOM 范围</span></h3><p>在有多个范围的情况下，可以使用 <code>compareBoundaryPoints()</code> 方法来确定这些范围是否有公共的边界。这个方法接受两个参数：表示比较方式的常量值和要比较的范围。表示比较方式的常量如下：</p>
<p>1、<code>Range.START_TO_START</code>：比较第一个范围和第二个范围的起点；<br>2、<code>Range.START_TO_END</code>：比较第一个范围的起点和第二个范围的终点；<br>3、<code>Range.END_TO_END</code>：比较第一个范围和第二个范围的终点；<br>4、<code>Range.END_TO_START</code>：比较第一个范围的终点和第二个范围的起点；</p>
<p><code>compareBoundaryPoints()</code>方法返回值如下：如果第一个范围中的点位于第二个范围中的点之前，返回 <code>-1</code> ；如果两个点相等，返回 <code>0</code> ；如果第一个范围中的点位于第二个范围中的点之后，返回 <code>1</code> 。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range1 = <span class="built_in">document</span>.createRange(),</span><br><span class="line">    range2 = <span class="built_in">document</span>.createRange(),</span><br><span class="line">    p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span><br><span class="line">range1.selectNodeContents(p1);</span><br><span class="line">range2.selectNodeContents(p1);</span><br><span class="line">range2.setEndBefore(p1.lastChild);</span><br><span class="line">alert(range1.compareBoundaryPoints(Range.START_TO_START,range2)); <span class="comment">//0</span></span><br><span class="line">alert(range1.compareBoundaryPoints(Range.END_TO_END,range2)); <span class="comment">//1</span></span><br></pre></td></tr></table></figure>
<p>这个例子中，两个范围的起点相同，第一个范围的终点位于第二个范围的终点后面，如图：<br><img src="https://cloud.githubusercontent.com/assets/9649921/11490882/d46e1548-9817-11e5-975c-deb496beefce.png" alt="1"></p>
<h3><span id="7-复制-dom-范围">7、复制 DOM 范围</span></h3><p>可以使用 <code>cloneRange()</code> 方法复制范围，这个方法会创建调用它的范围的一个副本。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newRange = range.cloneRange();</span><br></pre></td></tr></table></figure>
<p>新创建的范围与原来的范围包含相同的属性，而修改它的端点不会影响原来的范围。</p>
<h3><span id="8-清理-dom-范围">8、清理 DOM 范围</span></h3><p>在使用完范围后，最好是调用 <code>detach()</code> 方法，以便从创建范围的文档中分离出该范围。调用 <code>detach()</code> 之后，就可以放心地解除对范围的引用，从而让垃圾回收机制回收其内存了。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">range.detach(); <span class="comment">//从文档中分离</span></span><br><span class="line">range = <span class="literal">null</span>; <span class="comment">//解除引用</span></span><br></pre></td></tr></table></figure>
<p>在使用范围的最后在执行这两个步骤是我们推荐的方式，一旦分离范围，就不能在恢复使用了。</p>
<h1><span id="ie8及更早版本中的范围">IE8及更早版本中的范围</span></h1><p><code>IE9</code> 支持范围，但 <code>IE8</code> 及之前版本不支持范围。不过，<code>IE8</code> 及早起版本支持一种类似的概念，即 <strong>文本范围（text range）</strong> 。文本范围是 <code>IE</code> 专有特性，主要处理文本（不一定是 <code>DOM</code> 节点）。通过 <code>&lt;body&gt;</code>、<br><code>&lt;button&gt;</code>、<code>&lt;input&gt;</code>和<code>&lt;textarea&gt;</code>等几个元素，可以调用 <code>createTextRange()</code> 方法来创建文本范围。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.body.createTextRange();</span><br></pre></td></tr></table></figure>
<p>与 <code>DOM</code> 范围类似，使用 <code>IE</code> 文本范围的方式也有很多种。</p>
<h3><span id="1-用-ie-范围实现简单的选择">1、用 IE 范围实现简单的选择</span></h3><p>选择页面中某一区域最简单的方式，就是使用范围的 <code>findText()</code> 方法。这个方法会找到第一次出现的给定文本，并将范围移过来以环绕该文本。如果没找到文本，这个方法返回 <code>false</code> ；否则，返回 <code>true</code> 。同样，仍然以下面的 <code>HTML</code> 代码为例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>要选择 <code>Hello</code> ，可以使用以下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.body.createTextRange();</span><br><span class="line"><span class="keyword">var</span> found = range.findText(<span class="string">"Hello"</span>);</span><br><span class="line">alert(found); <span class="comment">//true</span></span><br><span class="line">alert(range.text); <span class="comment">//"Hello"</span></span><br></pre></td></tr></table></figure>
<p><code>IE</code> 中与 <code>DOM</code> 中的 <code>selectNode()</code> 方法最接近的方法是 <code>moveToElementText()</code> ，这个方法接受一个 <code>DOM</code> 元素，并选择该元素的所有文本，包含 <code>HTML</code> 标签，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.body.createTextRange(),</span><br><span class="line">    p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span><br><span class="line">range.moveToElementText(p1);</span><br></pre></td></tr></table></figure>
<p>在文本范围中包含 <code>HTML</code> 的情况下，可以使用 <code>htmlText</code> 属性取得范围的全部内容，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(range.htmlText);</span><br></pre></td></tr></table></figure>
<p><code>IE</code> 的范围没有任何属性可以随着范围选区的变化而动态更新。不过，其 <code>parentElement()</code> 方法倒是与<code>DOM</code> 的 <code>commonAncestorContainer</code> 属性类似。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ancestor = range.parentElement();</span><br></pre></td></tr></table></figure>
<p>这样就得到了范围选区的父节点。</p>
<h3><span id="2-使用-ie-范围实现复杂的选择">2、使用 IE 范围实现复杂的选择</span></h3><p>在 <code>IE</code> 中创建复杂范围的方法，就是以增量向四周移动范围。为此，<code>IE</code> 提供了 4 个方法：<br><code>move()</code>、<code>moveStart()</code>、<code>moveEnd()</code> 和 <code>expand()</code>。<br>这些方法都接受两个参数：移动单位和移动单位的数量。其中，移动单位是下列一种字符串值：</p>
<p>1、<code>character</code>：这个字符地移动；<br>2、<code>word</code>：逐个单词（一系列非空格字符）地移动；<br>3、<code>sentence</code>：逐个句子（一系列以句号、问号或叹号结尾的字符）地移动；<br>4、<code>textedit</code>：移动到当前范围选区的开始或结束位置。</p>
<p>通过 <code>moveStart()</code> 方法可以移动到范围的起点，通过 <code>moveEnd()</code> 方法可以移动到范围的终点，移动的幅度由单位数量指定，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">range.moveStart(<span class="string">"word"</span>,<span class="number">2</span>); <span class="comment">//起点移动 2 个单词</span></span><br><span class="line">range.moveEnd(<span class="string">"character"</span>,<span class="number">1</span>); <span class="comment">//终点移动 1 个字符</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>expand()</code> 方法可以将范围规范化。换句话说，可以将任何部分选择的文本全部选中。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">range.expand(<span class="string">"word"</span>); <span class="comment">//可以将整个单词选中</span></span><br></pre></td></tr></table></figure>
<p>而 <code>move()</code> 方法则先会折叠当前范围，然后再将范围移动到指定的单位数量，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">range.move(<span class="string">"character"</span>,<span class="number">5</span>); <span class="comment">//移动 5 个字符</span></span><br></pre></td></tr></table></figure>
<h3><span id="3-操作-ie-范围中的内容">3、操作 IE 范围中的内容</span></h3><p>在 <code>IE</code> 中操作范围中的内容可以使用 <code>text</code> 属性或 <code>pasteHTML()</code> 方法。如前所述，通过 <code>text</code> 属性可以取得范围中的内容文本；但是，也可以通过这个属性设置范围中的内容文本。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.body.createTextRange();</span><br><span class="line">range.findText(<span class="string">"Hello"</span>);</span><br><span class="line">range.text = <span class="string">"Hi"</span>;</span><br></pre></td></tr></table></figure>
<p>执行以上代码后的 <code>HTML</code> 代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">p1</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>Hi<span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这时，<code>HTML</code> 标签保持不变，若要像范围中插入 <code>HTML</code> 代码，就得使用 <code>pasteHTMl()</code> 方法，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range = <span class="built_in">document</span>.body.createTextRange();</span><br><span class="line">range.findText(<span class="string">"Hello"</span>);</span><br><span class="line">range.pasteHTML(<span class="string">"&lt;em&gt;Hi&lt;/em&gt;"</span>);</span><br></pre></td></tr></table></figure>
<p>执行以上代码后的 <code>HTML</code> 代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">p1</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span>Hi<span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span> world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意：在范围中包含 <code>HTML</code> 代码时，不应该使用 <code>pasteHTML()</code> ，因为这样很容易导致不可预料的结果（很可能是格式不正确的 <code>HTML</code>）。</p>
<h3><span id="4-折叠-ie-范围">4、折叠 IE 范围</span></h3><p><code>IE</code> 为范围提供的 <code>collapse()</code> 方法与 <code>DOM</code> 方法用法一样，可惜，没有对应的 <code>collapsed</code> 属性让我们知道范围是否已经折叠完毕。为此，必须使用 <code>boundingWidth</code> 属性，该属性返回范围的宽度（以像素为单位）。如果等于 <code>0</code> 说明范围已经折叠。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">range.collapse(<span class="literal">true</span>);</span><br><span class="line">alert(range.boundingWidth); <span class="comment">//0</span></span><br></pre></td></tr></table></figure>
<p>此外，还有 <code>boundingHeight</code>、<code>boundingLeft</code> 和<code>boundingTop</code> 等属性，可以提供一些位置信息。</p>
<h3><span id="5-比较-ie-范围">5、比较 IE 范围</span></h3><p><code>IE</code> 中的 <code>compareEndPoints()</code> 方法与 <code>DOM</code> 范围的 <code>compareBoundaryPoints()</code> 方法类似。这个方法接受两个参数：比较的类型和要比较的范围。比较类型的取值范围是下列几个字符串值：<code>StartToStart</code>、<br><code>StartToEnd</code>、<code>EndToEnd</code>、<code>EndToStart</code>。 <code>compareEndPoints()</code> 方法返回值同 <code>compareBoundaryPoints()</code> 方法。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range1 = <span class="built_in">document</span>.body.createTextRange(),</span><br><span class="line">    range2 = <span class="built_in">document</span>.body.createTextRange();</span><br><span class="line">range1.findText(<span class="string">"Hello world!"</span>);</span><br><span class="line">range2.findText(<span class="string">"Hello"</span>);</span><br><span class="line">alert(range1.compareEndPoints(<span class="string">"StartToStart"</span>,range2)); <span class="comment">//0</span></span><br><span class="line">alert(range1.compareEndPoints(<span class="string">"EndToEnd"</span>,range2)); <span class="comment">//1</span></span><br></pre></td></tr></table></figure>
<p><code>IE</code> 中还有两个方法，也用于比较范围：<code>isEqual()</code> 方法用于确定两个范围是否相等，<code>inRange()</code> 方法用于确定一个范围是否包含另一个范围。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> range1 = <span class="built_in">document</span>.body.createTextRange(),</span><br><span class="line">    range2 = <span class="built_in">document</span>.body.createTextRange();</span><br><span class="line">range1.findText(<span class="string">"Hello world!"</span>);</span><br><span class="line">range2.findText(<span class="string">"Hello"</span>);</span><br><span class="line">alert(<span class="string">"range1.isEqual(range2):"</span>+range1.isEqual(range2)); <span class="comment">//false</span></span><br><span class="line">alert(<span class="string">"range1.inRange(range2):"</span>+range1.inRange(range2)); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h3><span id="6-复制-ie-范围">6、复制 IE 范围</span></h3><p>在 <code>IE</code> 中使用 <code>duplicate()</code> 方法可以复制文本范围，结果会创建原范围的一个副本，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newRange = range.duplicate();</span><br></pre></td></tr></table></figure>
<p>新创建的范围会带有与原范围完全相同的属性。<br><br></p>
<p><g-emoji alias="yum" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f60b.png" ios-version="6.0">😋</g-emoji><g-emoji alias="yum" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f60b.png" ios-version="6.0">😋</g-emoji><g-emoji alias="yum" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f60b.png" ios-version="6.0">😋</g-emoji> 好了，基本知识就是这些，在这里和大家说拜拜啦~</p>
<p><a href="http://yixunfe.github.io/blog/demo/37/demo.html" target="_blank" rel="noopener">查看demo</a></p>
</div><br><h4>Thanks</h4><div class="copyright">版权声明：版权归作者所有，如需转载请联系博主。</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-05-24</span><i class="fa fa-tag"></i><!-- - item.categories.sort('posts').each(function(item) {--><!-- 		a.tag(href=config.root + item.path, title= item.name)= item.name + " "--><!-- - });--><a href="/h-blog/tags/range/" title="range" class="tag">range </a></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,https://zdddrszj.github.io/h-blog/2017/05/24/range/,Shirly,DOM 中的范围,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/h-blog/2017/06/18/rotating-cube/" title="3D 旋转立方体" class="btn">上一篇</a></li></ul></div><a id="comments"></a><div id="vcomments" style="margin:0 30px;"></div><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>const gitment = new Gitment({
    id: location.href,
    owner: 'zdddrszj',
    repo: 'h-blog',
    oauth: {
        client_id: 'fa0612e95df36a1b5754',
        client_secret: '27e682fd9c45ef2379461c346d3b23d5a1db057f',
    }
})
gitment.render('comments')</script></div></div></div></div><script src="/h-blog/js/jquery.js"></script><script src="/h-blog/js/jquery-migrate-1.2.1.min.js"></script><script src="/h-blog/js/jquery.appear.js"></script><script src="/h-blog/js/tagcanvas.js"></script><script>window.onload = function() {
  try {
    TagCanvas.textColour = '#FD6B1E'
    TagCanvas.outlineColour = '#999'
    TagCanvas.Start('tagsCanvas')
  } catch (e) {}
}</script></body></html>